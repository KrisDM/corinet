<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE experiment[
	<!ENTITY typeDefaults SYSTEM "typeDefaults.xml">
	<!ENTITY trainSet SYSTEM "../../PatternSets/Categor2006/Fig8.xml">
]>
<experiment xmlns="http://www.corinet.org/namespaces/CORINETSetup" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.corinet.org/namespaces/CORINETSetup ../../../code/xml/Setup/experimentSetup.xsd" 
definitionFile="./code/xml/Definition/languageDefinition.xml">
	<annotation>
		<documentation>
			Experiment from "A feedback model of perceptual learning and categorisation", Visual Cognition 13(2):129-65,2006.
		</documentation>
		<documentation>
			This file contains the exeperiment of fig. 8: patterns with less overlap than in fig. 3.
		</documentation>
		<documentation>
			Technical issues: same as for Exp1.xml
			----------------------------------------------------------------------------------------------------------------------------
			The first execution runs the experiment without a top down signal, the second execution simulates 
			the experiment with top-down information that is the same for each exemplar.  
			-----------------------------------------------------------------------------------------------------------------------------
			Input constructed similarly to Exp1.xml
			-----------------------------------------------------------------------------------------------------------------------------
			The results generated by this experiment are the weights for the basal integrationSite of the upper
			region at the end of each training phase (so 40 sets of weights, 20 for each execution). 
		</documentation>
	</annotation>
	<inputSection>
		<inputBlock id="PATTERN_INPUTS">
			<inputRange begin="0" end="28" step="1"/>
		</inputBlock>
		<inputBlock id="CATEGORY_INPUTS">
			<inputIndices>29 30 31 32 33 34</inputIndices>
		</inputBlock>
	</inputSection>
	<networkSection>
		<network inputs="35" id="N0" type="discrete">
			<block nodes="29" id="B0">
				<integrationSite inputRefs="PATTERN_INPUTS" type="compInt1" location="basal" id="D0">
					<initialisation type="diagonal"/>
					<normalisation type="normNone"/>
				</integrationSite>
				<integrationSite inputRefs="B1" type="disj1" location="apical" id="D1"/>
			</block>
			<block nodes="6" id="B1">
				<integrationSite inputRefs="B0" type="conj3" location="basal" id="D2"/>
				<integrationSite inputRefs="CATEGORY_INPUTS" type="disj1" location="apical" id="D3"/>
			</block>
		</network>
	</networkSection>
	<taskSection>
		<task type="addExtraBits1" columns="20" id="BARS_FIG8">
			<!--the bars part of the input pattern, training set of fig. 8 in paper-->
			<taskParams>
				<param name="numBits" value="1"/><!--one extra bar added to the patterns of fig. 8-->
			</taskParams>
			&trainSet;
		</task>
		<task type="set1" columns="9" id="DOTS">
			<!--the dots part of the input pattern, always present-->
			<patternSet columns="9">
				<p><r>1 1 1 1 1 1 1 1 1</r></p>
			</patternSet>
		</task>
		<task type="set1" columns="6" id="TOP_DOWN">
			<!--provides the top-down information for the second execution-->
			<patternSet columns="6">
				<p><r>1 0 0 0 0 0</r></p>
			</patternSet>
		</task>
	</taskSection>
	<executionSection xsi:type="engineV1">
		<!--training with patterns of fig. 8 without top-down signal-->
		<execution networks="N0" runs="20">
			<sequence>
				<!--bars inserted from inputs 0 to 19, dots from 20 to 28, no signal into bits 29-34-->
				<part phase="train" iterations="200" tasks="BARS_FIG8 DOTS" id="TRAIN_NOTOP"/>
			</sequence>
		</execution>
		<!--training with patterns of fig. 8 with top-down signal-->
		<execution networks="N0" runs="20">
			<sequence>
				<!--bars inserted from inputs 0 to 19, dots from 20 to 28, top-down signal into bits 29-34-->
				<part phase="train" iterations="200" tasks="BARS_FIG8 DOTS TOP_DOWN" id="TRAIN_TOP"/>
			</sequence>
		</execution>
	</executionSection>
	<defaultSection>
		&typeDefaults;
		<targetDefaults>
			<default targets="BARS_FIG8 DOTS">
				<taskParams>
					<param name="on" value="0.75"/><!--strength of input-->
				</taskParams>
			</default>
			<default targets="TOP_DOWN">
				<taskParams>
					<param name="on" value="0.75"/><!--strength of top-down feedback signal-->
				</taskParams>
			</default>
		</targetDefaults>
	</defaultSection>
	<eventSection xsi:type="eventModelV1">
		<report type="xml" location="./examples/Experiments/Categor2006/Exp3Results.xml" id="R1"/>
		<event eventTime="endPart" parts="TRAIN_NOTOP TRAIN_TOP">
			<!--record weights of basal integrationSite of upper region at end of each run-->
			<record type="weights" targets="D2" report="R1"/>
		</event>
	</eventSection>
</experiment>
